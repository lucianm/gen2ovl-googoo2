From 954d81d6d041fdc3bd9c5d221a8b1a395755b274 Mon Sep 17 00:00:00 2001
From: Lucian Muresan <lucianm@users.sourceforge.net>
Date: Fri, 1 Nov 2013 23:00:25 +0100
Subject: [PATCH] xbmc-9999-nomythtv

---
 Makefile.in  |  2 +-
 configure.in | 19 +++++++++++++++++++
 2 files changed, 20 insertions(+), 1 deletion(-)

diff --git a/Makefile.in b/Makefile.in
index 618ca25..f7297f5 100644
--- a/Makefile.in
+++ b/Makefile.in
@@ -209,7 +209,7 @@ LIB_DIRS=\
 	lib/cpluff \
 	lib/xbmc-dll-symbols
 
-ifeq (@USE_MYSQL@,1)
+ifeq (@USE_MYTHTV@,1)
 LIB_DIRS += lib/cmyth
 CMYTH=cmyth
 endif
diff --git a/configure.in b/configure.in
index 8fb51b8..b9b09d5 100644
--- a/configure.in
+++ b/configure.in
@@ -476,6 +476,12 @@ AC_ARG_ENABLE([mysql],
   [use_mysql=$enableval],
   [use_mysql=yes])
 
+AC_ARG_ENABLE([mythtv],
+  [AS_HELP_STRING([--disable-mythtv],
+  [disable mythtv])],
+  [use_mythtv=$enableval],
+  [use_mythtv=yes])
+
 AC_ARG_ENABLE([webserver],
   [AS_HELP_STRING([--disable-webserver],
   [disable webserver])],
@@ -1076,6 +1082,9 @@ if test "$use_mysql" = "yes"; then
   else
     AC_MSG_ERROR($missing_program)
   fi
+  if test "$use_mythtv" = "yes"; then
+    AC_DEFINE([HAVE_MYTHTV],[1],["Define to 1 if you want mythtv support"])
+  fi
 fi
 AC_CHECK_HEADER([ass/ass.h],, AC_MSG_ERROR($missing_library))
 AC_CHECK_HEADER([mpeg2dec/mpeg2.h],, AC_MSG_ERROR($missing_library))
@@ -2332,6 +2341,15 @@ else
   final_message="$final_message\n  MySQL:\tNo"
   USE_MYSQL=0
 fi
+
+if test "$use_mythtv" = "yes"; then
+  final_message="$final_message\n  MythTV:\tYes"
+  USE_MYTHTV=1
+else
+  final_message="$final_message\n  MythTV:\tNo"
+  USE_MYTHTV=0
+fi
+
 if test "$use_webserver" = "yes"; then
   final_message="$final_message\n  Webserver:\tYes"
   USE_WEB_SERVER=1
@@ -2626,6 +2644,7 @@ AC_SUBST(USE_LIBUDEV)
 AC_SUBST(USE_LIBUSB)
 AC_SUBST(USE_LIBCEC)
 AC_SUBST(USE_MYSQL)
+AC_SUBST(USE_MYTHTV)
 AC_SUBST(USE_WAYLAND)
 AC_SUBST(USE_WEB_SERVER)
 AC_SUBST(USE_UPNP)
-- 
1.8.3.2

